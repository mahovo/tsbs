% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/hmm_msgarch_helpers.R
\name{sample_from_pools_sync}
\alias{sample_from_pools_sync}
\title{Sample from State-Specific Pools with Synchronized Sampling}
\usage{
sample_from_pools_sync(sim_states, pools, micro_block_length = 1L)
}
\arguments{
\item{sim_states}{Integer vector of simulated state sequence (length T).}

\item{pools}{State-specific pools from \code{extract_state_pools}.}

\item{micro_block_length}{Integer, length of micro-blocks for within-state
sampling. Use 1 for iid sampling (default), >1 to preserve local dependence.}
}
\value{
Integer vector of length T containing sampled time indices from
the original data.
}
\description{
For each position in a simulated state sequence, samples a time index
from the original data where that state occurred. Supports both individual
(iid) sampling and micro-block sampling within states.
}
\details{
When \code{micro_block_length = 1}, each time point is sampled independently
from the appropriate state pool.

When \code{micro_block_length > 1}, the function identifies "runs" of
consecutive time points in the same state and fills them with micro-blocks
sampled from that state's pool. This preserves some local autocorrelation
in innovations while still allowing the Markov chain to drive regime dynamics.

For multivariate data, the same time indices are used across all variables,
which preserves cross-sectional dependence.
}
\keyword{internal}
